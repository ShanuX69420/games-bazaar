<div class="d-flex align-items-center">
    <a href="{% url 'public_profile' other_user.username %}" class="text-decoration-none text-dark flex-shrink-0">
        <img src="{{ other_user.profile.image_url }}" alt="{{ other_user.username }}" width="40" height="40" class="rounded-circle me-3">
    </a>
    <div class="flex-grow-1" style="min-width: 0;">
        <h5 class="mb-0 text-truncate">
            <a href="{% url 'public_profile' other_user.username %}" class="text-decoration-none text-dark">
                {{ other_user.username }}
            </a>
        </h5>
        <small class="user-status {% if other_user.profile.is_online %}online{% else %}offline{% endif %}"
               data-username="{{ other_user.username }}"
               {% if not other_user.profile.is_online and other_user.profile.last_seen %}
                   data-iso-timestamp="{{ other_user.profile.last_seen.isoformat }}"
               {% endif %}>
            {% if other_user.profile.is_online %}
                Online
            {% elif other_user.profile.last_seen %}
                was active {{ other_user.profile.last_seen|timesince }} ago
            {% else %}
                Offline
            {% endif %}
            {% if other_user.profile.can_moderate %}
                <span class="badge bg-warning text-dark ms-2">Support</span>
            {% endif %}
            <span class="blocked-user-indicator badge bg-danger ms-2" style="display: none;">Blocked</span>
        </small>
    </div>
    
    <div class="dropdown">
        <button class="btn btn-link text-muted p-1" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="border: none; background: none;">
            <i class="fas fa-ellipsis-v"></i>
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
            <li>
                <a class="dropdown-item" href="{% url 'support_center' %}?report_user={{ other_user.username }}">
                    Report User
                </a>
            </li>
            <li>
                <a class="dropdown-item block-user-btn" href="#" data-user-id="{{ other_user.id }}" data-username="{{ other_user.username }}">
                    <span class="block-action-text">Block User</span>
                </a>
            </li>
        </ul>
    </div>
</div>